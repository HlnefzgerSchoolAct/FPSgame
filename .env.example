# ========================================
# FPSgame Environment Variables
# ========================================
# This file documents all environment variables used in the application.
# Copy this to .env and fill in your actual values.

# ========================================
# FRONTEND (Vite) Variables
# ========================================
# Note: Vite only exposes variables prefixed with VITE_ to the client

# Backend API origin (no trailing slash)
# Development: http://localhost:3001
# Production: https://api-<random>.fly.dev
VITE_PUBLIC_API_ORIGIN=http://localhost:3001

# WebSocket URL for game server (no trailing slash)
# Development: ws://localhost:3001
# Production: wss://api-<random>.fly.dev
VITE_PUBLIC_WSS_URL=ws://localhost:3001

# Build environment identifier
# Options: development, staging, production
VITE_BUILD_ENV=development

# ========================================
# BACKEND (Node.js Server) Variables
# ========================================

# Node environment
# Options: development, production, test
NODE_ENV=development

# Server port (internal)
# Note: Fly.io uses PORT=8080 internally, exposes 80/443 externally
PORT=3001

# Public origin for CORS and redirects (no trailing slash)
# Should match the frontend deployment URL
PUBLIC_ORIGIN=http://localhost:8080

# Allowed CORS origins (comma-separated)
# Development: http://localhost:8080,http://localhost:5173
# Production: https://play-<random>.vercel.app
ALLOWED_ORIGINS=http://localhost:8080,http://localhost:5173

# WebSocket path (default: /ws)
WSS_PATH=/ws

# ========================================
# Database Configuration
# ========================================

# PostgreSQL connection string (Neon or other provider)
# Format: postgresql://user:password@host:port/database?sslmode=require
# Get from: https://console.neon.tech
DATABASE_URL=postgresql://user:password@localhost:5432/fpsgame?sslmode=prefer

# ========================================
# Cache & Pub/Sub Configuration
# ========================================

# Redis connection string (Upstash or other provider)
# Format: redis://default:password@host:port
# Get from: https://console.upstash.com
REDIS_URL=redis://localhost:6379

# ========================================
# Authentication & Security
# ========================================

# JWT secret for session tokens (generate with: openssl rand -base64 32)
# CRITICAL: Keep this secret and rotate regularly
JWT_SECRET=your-secret-key-here-change-in-production

# Shop signing key for purchase verification (generate with: openssl rand -base64 32)
# CRITICAL: Keep this secret
SHOP_SIGNING_KEY=your-shop-signing-key-here-change-in-production

# ========================================
# Performance & Rate Limiting
# ========================================

# Rate limit: requests per second per IP
RATE_LIMIT_RPS=100

# Game server tick rate (Hz)
# Higher = more accurate, more bandwidth
# Recommended: 30-60
TICK_HZ=30

# Snapshot send rate (Hz)
# Should be <= TICK_HZ
# Recommended: 20-30
SNAPSHOT_HZ=20

# ========================================
# Monitoring & Logging
# ========================================

# Log level
# Options: error, warn, info, debug, trace
LOG_LEVEL=info

# Enable Prometheus metrics endpoint
ENABLE_METRICS=true

# Metrics endpoint path
METRICS_PATH=/metrics

# ========================================
# Feature Flags
# ========================================

# Enable anti-cheat systems
ENABLE_ANTICHEAT=true

# Enable detailed performance logging
ENABLE_PERF_LOGS=false

# Enable debug mode (additional logging, no console drop in builds)
DEBUG_MODE=false

# ========================================
# External Services (Optional)
# ========================================

# Sentry DSN for error tracking (optional)
# Get from: https://sentry.io
SENTRY_DSN=

# Better Stack (Logtail) token for log aggregation (optional)
# Get from: https://logs.betterstack.com
LOGTAIL_TOKEN=

# ========================================
# Development Only
# ========================================

# Mock authentication in development (bypass JWT verification)
MOCK_AUTH=false

# Enable hot reload for server
HOT_RELOAD=true

# ========================================
# Production Checklist
# ========================================
# Before deploying to production, ensure:
# [ ] All secrets are randomly generated (JWT_SECRET, SHOP_SIGNING_KEY)
# [ ] DATABASE_URL points to production database with SSL
# [ ] REDIS_URL points to production Redis instance
# [ ] ALLOWED_ORIGINS contains only production frontend URL(s)
# [ ] NODE_ENV=production
# [ ] DEBUG_MODE=false
# [ ] MOCK_AUTH=false
# [ ] LOG_LEVEL=info or warn
# [ ] All secrets are stored securely (GitHub Secrets, Fly Secrets, Vercel Env Vars)
